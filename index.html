<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body style="background-image:url(./img/background.jpg)">
<style>
    @font-face {
        font-family: 'DS-DIGIB';
        src: url('./font/ds_digital/DS-DIGIB.TTF');
    }
</style>

<div id="blocToCenter" style="width:100vh;height:100vh;position:absolute;margin:auto;">
    <div id="left" style="float:left;display:block;width:150px;height:400px;border: 1px solid #0000FF;text-align:center;">
        <input id="startGame" type="image" style="width:100px" src="./img/startBtn.png">
        <input id="pauseGame" type="image" style="width:100px" src="./img/pauseBtn.png">
        <input id="continueGame" type="image" style="width:100px;display: none" src="./img/continueBtn.png">
    </div>
    <div id="divGame" style="float:left;display:block;width:700px;height:400px;border: 1px solid #0000FF;"></div>
    <div id="right" style="float:right;display:block;width:150px;height:400px;border: 1px solid #0000FF;"></div>
</div>
</body>
<script src="js/game.js"></script>
<script src="js/game.keycode.js"></script>
<script src="js/game.control.js"></script>
<script src="js/game.display.js"></script>
<script src="js/game.ai.js"></script>
<script src="js/game.conf.js"></script>

<script>
    (function () {
        // début du code isolé
        let requestAnimId;
        let initialisation = ()=> {
            // le code de l'initialisation
            game.init();

            requestAnimId = window.requestAnimationFrame(main); // premier appel de main au rafraîchissement de la page
        };
        let main = ()=> {
            // le code du jeu
            game.clearLayer(game.playersBallLayer);
            game.movePlayers();
            game.displayPlayers();
            game.moveBall();
            if ( game.ball.inGame ) {
                game.lostBall();
            }
            game.ai.move();
            game.collideBallWithPlayersAndAction();
            requestAnimId = window.requestAnimationFrame(main); // rappel de main au prochain rafraîchissement de la page
        };
        window.onload = initialisation; // appel de la fonction initialisation au chargement de la page
        // fin du code isolé
    })();
</script>
</html>
