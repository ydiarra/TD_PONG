<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <div id="menu">
        <input id="startGame" type="button" value="Start Game">
    </div>
    <div id="divGame"></div>
</body>
<script src="js/game.js"></script>
<script src="js/game.keycode.js"></script>
<script src="js/game.control.js"></script>
<script src="js/game.display.js"></script>
<script src="js/game.ai.js"></script>

<script>
    (function () {
        // début du code isolé
        let requestAnimId;
        let initialisation = ()=> {
            // le code de l'initialisation
            game.init();

            requestAnimId = window.requestAnimationFrame(main); // premier appel de main au rafraîchissement de la page
        };
        let main = ()=> {
            // le code du jeu
            game.clearLayer(game.playersBallLayer);
            game.movePlayers();
            game.displayPlayers();
            game.moveBall();
            if ( game.ball.inGame ) {
                game.lostBall();
            }
            game.ai.move();
            game.collideBallWithPlayersAndAction();
            requestAnimId = window.requestAnimationFrame(main); // rappel de main au prochain rafraîchissement de la page
        };
        window.onload = initialisation; // appel de la fonction initialisation au chargement de la page
        // fin du code isolé
    })();
</script>
</html>
